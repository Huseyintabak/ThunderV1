<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raporlama ve Analitik - Thunder V1</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <style>
        .dashboard-widget {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.2s ease-in-out;
        }
        .dashboard-widget:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }
        .kpi-card {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
        }
        .report-card {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
        }
        .widget-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 15px;
        }
        .refresh-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        .refresh-btn:hover {
            background: rgba(255,255,255,0.3);
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">
                <i class="fas fa-bolt me-2"></i>Thunder V1
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">
                            <i class="fas fa-home me-1"></i>Ana Sayfa
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="production.html">
                            <i class="fas fa-industry me-1"></i>Üretim
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="reports.html">
                            <i class="fas fa-chart-bar me-1"></i>Raporlama
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid mt-4">
        <!-- Dashboard İstatistikleri -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="dashboard-widget">
                    <div class="widget-header">
                        <h4><i class="fas fa-tachometer-alt me-2"></i>Dashboard İstatistikleri</h4>
                        <button class="refresh-btn" onclick="loadDashboardStats()">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    <div class="row" id="dashboardStats">
                        <!-- İstatistikler buraya yüklenecek -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard Widget'ları -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="dashboard-widget">
                    <div class="widget-header">
                        <h4><i class="fas fa-th-large me-2"></i>Dashboard Widget'ları</h4>
                        <button class="btn btn-primary btn-sm" onclick="showAddWidgetModal()">
                            <i class="fas fa-plus me-1"></i>Widget Ekle
                        </button>
                    </div>
                    <div class="row" id="dashboardWidgets">
                        <!-- Widget'lar buraya yüklenecek -->
                    </div>
                </div>
            </div>
        </div>

        <!-- KPI'lar -->
        <div class="row mb-4">
            <div class="col-md-6">
                <div class="dashboard-widget">
                    <div class="widget-header">
                        <h4><i class="fas fa-chart-line me-2"></i>KPI Tanımları</h4>
                        <button class="btn btn-success btn-sm" onclick="showAddKPIModal()">
                            <i class="fas fa-plus me-1"></i>KPI Ekle
                        </button>
                    </div>
                    <div id="kpiDefinitions">
                        <!-- KPI'lar buraya yüklenecek -->
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="dashboard-widget">
                    <div class="widget-header">
                        <h4><i class="fas fa-chart-pie me-2"></i>KPI Değerleri</h4>
                        <button class="btn btn-info btn-sm" onclick="calculateKPI()">
                            <i class="fas fa-calculator me-1"></i>Hesapla
                        </button>
                    </div>
                    <div id="kpiValues">
                        <!-- KPI değerleri buraya yüklenecek -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Rapor Şablonları -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="dashboard-widget">
                    <div class="widget-header">
                        <h4><i class="fas fa-file-alt me-2"></i>Rapor Şablonları</h4>
                        <button class="btn btn-warning btn-sm" onclick="showAddReportModal()">
                            <i class="fas fa-plus me-1"></i>Şablon Ekle
                        </button>
                    </div>
                    <div class="row" id="reportTemplates">
                        <!-- Rapor şablonları buraya yüklenecek -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Rapor Geçmişi -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="dashboard-widget">
                    <div class="widget-header">
                        <h4><i class="fas fa-history me-2"></i>Rapor Geçmişi</h4>
                        <button class="btn btn-secondary btn-sm" onclick="loadReportHistory()">
                            <i class="fas fa-sync-alt me-1"></i>Yenile
                        </button>
                    </div>
                    <div id="reportHistory">
                        <!-- Rapor geçmişi buraya yüklenecek -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Widget Ekleme Modal -->
    <div class="modal fade" id="addWidgetModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Yeni Widget Ekle</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="widgetForm">
                        <div class="mb-3">
                            <label class="form-label">Widget Adı</label>
                            <input type="text" class="form-control" id="widgetName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Widget Türü</label>
                            <select class="form-control" id="widgetType" required>
                                <option value="chart">Grafik</option>
                                <option value="table">Tablo</option>
                                <option value="metric">Metrik</option>
                                <option value="gauge">Gauge</option>
                                <option value="progress">İlerleme</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Başlık</label>
                            <input type="text" class="form-control" id="widgetTitle" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Veri Kaynağı</label>
                            <input type="text" class="form-control" id="dataSource" placeholder="/api/endpoint">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">İptal</button>
                    <button type="button" class="btn btn-primary" onclick="addWidget()">Ekle</button>
                </div>
            </div>
        </div>
    </div>

    <!-- KPI Ekleme Modal -->
    <div class="modal fade" id="addKPIModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Yeni KPI Ekle</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="kpiForm">
                        <div class="mb-3">
                            <label class="form-label">KPI Adı</label>
                            <input type="text" class="form-control" id="kpiName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Kategori</label>
                            <select class="form-control" id="kpiCategory" required>
                                <option value="production">Üretim</option>
                                <option value="quality">Kalite</option>
                                <option value="efficiency">Verimlilik</option>
                                <option value="financial">Mali</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Hedef Değer</label>
                            <input type="number" class="form-control" id="targetValue" step="0.01">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Birim</label>
                            <input type="text" class="form-control" id="kpiUnit" placeholder="adet, %, gün">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">İptal</button>
                    <button type="button" class="btn btn-primary" onclick="addKPI()">Ekle</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Rapor Oluşturma Modal -->
    <div class="modal fade" id="generateReportModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Rapor Oluştur</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="reportForm">
                        <div class="mb-3">
                            <label class="form-label">Rapor Adı</label>
                            <input type="text" class="form-control" id="reportName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Şablon Seçin</label>
                            <select class="form-control" id="templateSelect" required>
                                <option value="">Şablon seçin...</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Tarih</label>
                            <input type="date" class="form-control" id="reportDate" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">İptal</button>
                    <button type="button" class="btn btn-primary" onclick="generateReport()">Oluştur</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="reports.js"></script>
</body>
</html>
