<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Üretim Operatör Paneli - ThunderV1</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <style>
        .operator-card {
            transition: all 0.3s ease;
            border: 2px solid #e9ecef;
        }
        .operator-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .stage-card {
            border-left: 4px solid #007bff;
        }
        .stage-active {
            border-left-color: #28a745;
            background-color: #f8f9fa;
        }
        .stage-completed {
            border-left-color: #6c757d;
            background-color: #e9ecef;
        }
        .timer-display {
            font-size: 2rem;
            font-weight: bold;
            color: #007bff;
        }
        .production-progress {
            height: 8px;
            border-radius: 4px;
        }
        
        /* Kart yükseklik eşitliği */
        .card.h-100 {
            height: 100%;
        }
        
        .card-body {
            display: flex;
            flex-direction: column;
        }
        
        .card-body > div {
            flex: 1;
        }
        
        /* Aşama Flow Stilleri */
        .stage-flow-container {
            position: relative;
            padding: 20px 0;
        }
        
        .stage-flow-item {
            position: relative;
            margin-bottom: 30px;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            background: #fff;
            transition: all 0.3s ease;
        }
        
        .stage-flow-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .stage-flow-item.completed {
            border-color: #28a745;
            background: #f8fff9;
        }
        
        .stage-flow-item.active {
            border-color: #007bff;
            background: #f0f8ff;
            animation: pulse 2s infinite;
        }
        
        .stage-flow-item.pending {
            border-color: #6c757d;
            background: #f8f9fa;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 123, 255, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(0, 123, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 123, 255, 0); }
        }
        
        .stage-connector {
            position: absolute;
            left: 50%;
            top: -15px;
            width: 2px;
            height: 30px;
            background: #dee2e6;
            transform: translateX(-50%);
        }
        
        .stage-connector.completed {
            background: #28a745;
        }
        
        .stage-connector.active {
            background: #007bff;
        }
        
        .stage-number {
            position: absolute;
            left: -15px;
            top: 50%;
            transform: translateY(-50%);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #6c757d;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }
        
        .stage-number.completed {
            background: #28a745;
        }
        
        .stage-number.active {
            background: #007bff;
        }
        
        .stage-timeline {
            position: relative;
            margin-left: 20px;
        }
        
        .stage-actions {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e9ecef;
        }
        
        .stage-progress-bar {
            height: 6px;
            border-radius: 3px;
            background: #e9ecef;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .stage-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #007bff, #0056b3);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>

    <!-- Ana Container -->
    <div class="container-fluid mt-4">
        <!-- Operatör Girişi Modal -->
        <div class="modal fade" id="operatorLoginModal" tabindex="-1" data-bs-backdrop="static">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-primary text-white">
                        <h5 class="modal-title">
                            <i class="fas fa-sign-in-alt me-2"></i>Operatör Girişi
                        </h5>
                    </div>
                    <div class="modal-body">
                        <form id="operatorLoginForm">
                            <div class="mb-3">
                                <label for="operatorSelect" class="form-label">Operatör Seçiniz *</label>
                                <select class="form-select" id="operatorSelect" required>
                                    <option value="">Operatör seçiniz...</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="operatorPassword" class="form-label">Şifre</label>
                                <input type="password" class="form-control" id="operatorPassword" placeholder="Opsiyonel şifre">
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" onclick="loginOperator()">
                            <i class="fas fa-sign-in-alt me-2"></i>Giriş Yap
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Operatör Paneli -->
        <div id="operatorPanel" style="display: none;">
            <!-- Üst Bilgi Çubuğu -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card bg-primary text-white">
                        <div class="card-body">
                            <div class="row align-items-center">
                                <div class="col-md-6">
                                    <h4 class="mb-1">
                                        <i class="fas fa-cogs me-2"></i>Üretim Operatör Paneli
                                    </h4>
                                    <p class="mb-0">Hoş geldiniz, <span id="current-operator-name"></span></p>
                                </div>
                                <div class="col-md-6 text-end">
                                    <button class="btn btn-light" onclick="logoutOperator()">
                                        <i class="fas fa-sign-out-alt me-2"></i>Çıkış
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Üst Panel - Planlanan İşler ve Aktif Üretimler -->
            <div class="row mb-4">
                <!-- Sol Panel - Planlanan İşler -->
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-clipboard-list me-2"></i>Planlanan İşler
                            </h5>
                            <button class="btn btn-sm btn-outline-primary" onclick="loadAssignedJobs()">
                                <i class="fas fa-sync-alt me-1"></i>Yenile
                            </button>
                        </div>
                        <div class="card-body">
                            <div id="assigned-jobs-container">
                                <div class="text-center py-4">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">Yükleniyor...</span>
                                    </div>
                                    <p class="mt-2 text-muted">Planlanan işler yükleniyor...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sağ Panel - Aktif Üretimler -->
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-play-circle me-2"></i>Aktif Üretimler
                            </h5>
                            <button class="btn btn-sm btn-outline-primary" onclick="loadActiveProductions()">
                                <i class="fas fa-sync-alt me-1"></i>Yenile
                            </button>
                        </div>
                        <div class="card-body">
                            <div id="active-productions-container">
                                <div class="text-center py-4">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">Yükleniyor...</span>
                                    </div>
                                    <p class="mt-2 text-muted">Aktif üretimler yükleniyor...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ürün Detayları -->
            <div class="row mb-4" id="product-details-section" style="display: none;">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-box me-2"></i>Üreteceği Ürün Detayları
                            </h5>
                            <div>
                                <button class="btn btn-sm btn-outline-primary" onclick="loadProductDetails()">
                                    <i class="fas fa-sync-alt me-1"></i>Yenile
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="product-details-container">
                                <div class="text-center py-4">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">Yükleniyor...</span>
                                    </div>
                                    <p class="mt-2 text-muted">Ürün detayları yükleniyor...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Aşama Detayları Flow -->
            <div class="row" id="stage-details-section" style="display: none;">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-project-diagram me-2"></i>Üretim Aşama Akışı
                            </h5>
                            <div class="d-flex align-items-center">
                                <span class="badge bg-info me-2" id="product-type-badge">Ürün Tipi</span>
                                <button class="btn btn-sm btn-outline-primary" onclick="refreshStageFlow()">
                                    <i class="fas fa-sync-alt me-1"></i>Yenile
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <!-- Ürün Bilgileri -->
                            <div class="row mb-4" id="product-info-section">
                                <div class="col-md-6">
                                    <div class="card bg-light">
                                        <div class="card-body">
                                            <h6 class="card-title">
                                                <i class="fas fa-user me-2"></i>Müşteri ve Sipariş Bilgileri
                                            </h6>
                                            <div id="product-details">
                                                <!-- Ürün detayları buraya yüklenecek -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card bg-light">
                                        <div class="card-body">
                                            <h6 class="card-title">
                                                <i class="fas fa-chart-line me-2"></i>İlerleme Durumu
                                            </h6>
                                            <div id="progress-details">
                                                <!-- İlerleme detayları buraya yüklenecek -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Aşama Akışı -->
                            <div class="stage-flow-container" id="stage-details-container">
                                <!-- Aşama akışı buraya yüklenecek -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Üretim Başlatma Modal -->
    <div class="modal fade" id="startProductionModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title">
                        <i class="fas fa-play me-2"></i>Üretim Başlat
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label fw-bold">Ürün Adı:</label>
                                <div class="form-control-plaintext" id="production-product-name"></div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label fw-bold">Miktar:</label>
                                <div class="form-control-plaintext" id="production-quantity"></div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label fw-bold">Plan ID:</label>
                                <div class="form-control-plaintext" id="production-plan-id"></div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label fw-bold">Üretim ID:</label>
                                <div class="form-control-plaintext" id="production-id"></div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label fw-bold">Atanan Operatör:</label>
                                <div class="form-control-plaintext" id="production-assigned-operator"></div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label fw-bold">Durum:</label>
                                <div class="form-control-plaintext" id="production-status"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label fw-bold">Üretim Talimatları:</label>
                        <div class="alert alert-info" id="production-instructions">
                            <i class="fas fa-info-circle me-2"></i>
                            Üretim sürecini başlatmadan önce tüm gerekli malzemelerin hazır olduğundan emin olun.
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="production-notes" class="form-label">Başlangıç Notları</label>
                        <textarea class="form-control" id="production-notes" rows="3" placeholder="Üretim başlangıcı ile ilgili notlar..."></textarea>
                    </div>
                    
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Dikkat:</strong> Üretimi başlattıktan sonra ilk aşama otomatik olarak başlayacaktır.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">İptal</button>
                    <button type="button" class="btn btn-success" onclick="confirmStartProduction()">
                        <i class="fas fa-play me-2"></i>Üretimi Başlat
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Aşama Başlatma Modal -->
    <div class="modal fade" id="startStageModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title">
                        <i class="fas fa-play me-2"></i>Aşama Başlat
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Aşama:</label>
                        <div class="form-control-plaintext fw-bold" id="start-stage-name"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Tahmini Süre:</label>
                        <div class="form-control-plaintext" id="start-stage-duration"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Gerekli Beceriler:</label>
                        <div class="form-control-plaintext" id="start-stage-skills"></div>
                    </div>
                    <div class="mb-3">
                        <label for="stage-notes" class="form-label">Notlar</label>
                        <textarea class="form-control" id="stage-notes" rows="3" placeholder="Aşama ile ilgili notlar..."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">İptal</button>
                    <button type="button" class="btn btn-success" onclick="confirmStartStage()">
                        <i class="fas fa-play me-2"></i>Aşamayı Başlat
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Aşama Tamamlama Modal -->
    <div class="modal fade" id="completeStageModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-warning text-dark">
                    <h5 class="modal-title">
                        <i class="fas fa-check-circle me-2"></i>Aşama Tamamla
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Aşama:</label>
                        <div class="form-control-plaintext fw-bold" id="complete-stage-name"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Başlangıç Zamanı:</label>
                        <div class="form-control-plaintext" id="complete-stage-start-time"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Geçen Süre:</label>
                        <div class="form-control-plaintext fw-bold text-primary" id="complete-stage-duration"></div>
                    </div>
                    <div class="mb-3">
                        <label for="completion-notes" class="form-label">Tamamlama Notları</label>
                        <textarea class="form-control" id="completion-notes" rows="3" placeholder="Aşama tamamlama notları..."></textarea>
                    </div>
                    <div class="mb-3" id="quality-check-section" style="display: none;">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i>
                            Bu aşama için kalite kontrolü gereklidir.
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">İptal</button>
                    <button type="button" class="btn btn-warning" onclick="confirmCompleteStage()">
                        <i class="fas fa-check-circle me-2"></i>Aşamayı Tamamla
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Kalite Kontrol Modal -->
    <div class="modal fade" id="qualityCheckModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-info text-white">
                    <h5 class="modal-title">
                        <i class="fas fa-clipboard-check me-2"></i>Kalite Kontrolü
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Kontrol Noktası:</label>
                        <div class="form-control-plaintext fw-bold" id="checkpoint-name"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Açıklama:</label>
                        <div class="form-control-plaintext" id="checkpoint-description"></div>
                    </div>
                    <div class="mb-3">
                        <label for="quality-result" class="form-label">Kontrol Sonucu *</label>
                        <select class="form-select" id="quality-result" required>
                            <option value="">Sonuç seçiniz...</option>
                            <option value="pass">Geçti</option>
                            <option value="fail">Başarısız</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="quality-notes" class="form-label">Kontrol Notları</label>
                        <textarea class="form-control" id="quality-notes" rows="3" placeholder="Kalite kontrol notları..."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">İptal</button>
                    <button type="button" class="btn btn-info" onclick="submitQualityCheck()">
                        <i class="fas fa-save me-2"></i>Kaydet
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Üretim Modalı -->
    <div class="modal fade" id="productionModal" tabindex="-1" aria-labelledby="productionModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="productionModalLabel">
                        <i class="fas fa-cogs me-2"></i>Üretim Başlat
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Ürün Bilgileri -->
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="card bg-light">
                                <div class="card-body">
                                    <h6 class="card-title text-primary">Üretilecek Ürün</h6>
                                    <div class="mb-2">
                                        <strong>Ürün Adı:</strong> <span id="modal-product-name">-</span>
                                    </div>
                                    <div class="mb-2">
                                        <strong>Ürün Kodu:</strong> <span id="modal-product-code">-</span>
                                    </div>
                                    <div class="mb-2">
                                        <strong>Hedef Miktar:</strong> <span id="modal-target-quantity" class="badge bg-info fs-6">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card bg-success text-white">
                                <div class="card-body">
                                    <h6 class="card-title">Üretim Durumu</h6>
                                    <div class="mb-2">
                                        <strong>Üretilen:</strong> <span id="modal-produced-quantity" class="badge bg-light text-dark fs-6">0</span>
                                    </div>
                                    <div class="mb-2">
                                        <strong>Kalan:</strong> <span id="modal-remaining-quantity" class="badge bg-warning fs-6">-</span>
                                    </div>
                                    <div class="mb-2">
                                        <strong>İlerleme:</strong>
                                        <div class="progress mt-1">
                                            <div id="modal-progress-bar" class="progress-bar" role="progressbar" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Barkod Okuma ve Adet Girişi Alanı -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">
                                        <i class="fas fa-barcode me-2"></i>Barkod Okuma ve Üretim
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <!-- Barkod Okuma -->
                                    <div class="mb-4">
                                        <label class="form-label fw-bold">
                                            <i class="fas fa-qrcode me-2"></i>Ürün Barkodu Okutun
                                        </label>
                                        <div class="input-group mb-3">
                                            <span class="input-group-text">
                                                <i class="fas fa-barcode"></i>
                                            </span>
                                            <input type="text" class="form-control form-control-lg" id="barcodeInput" 
                                                   placeholder="Barkodu buraya okutun (otomatik işlenecek)..." 
                                                   autocomplete="off">
                                            <button class="btn btn-primary" type="button" onclick="processBarcode()" style="display: none;">
                                                <i class="fas fa-check me-1"></i>Barkod İşle
                                            </button>
                                        </div>
                                        <div class="alert alert-info">
                                            <i class="fas fa-info-circle me-2"></i>
                                            Barkod okutulduktan sonra otomatik olarak işlenecek ve üretilen adet miktarını girebileceksiniz.
                                        </div>
                                    </div>

                                    <!-- Adet Girişi (Barkod okutulduktan sonra görünür) -->
                                    <div class="mb-4" id="quantity-input-section" style="display: none;">
                                        <label class="form-label fw-bold">
                                            <i class="fas fa-calculator me-2"></i>Üretilen Adet Miktarı
                                        </label>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="input-group mb-3">
                                                    <span class="input-group-text">
                                                        <i class="fas fa-plus"></i>
                                                    </span>
                                                    <input type="number" class="form-control form-control-lg" id="producedQuantityInput" 
                                                           placeholder="Üretilen adet miktarını girin..." 
                                                           min="1" max="1000" value="1">
                                                    <button class="btn btn-success" type="button" onclick="addProducedQuantity()">
                                                        <i class="fas fa-plus me-1"></i>Ekle
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="d-flex align-items-center h-100">
                                                    <div class="text-center w-100">
                                                        <div class="badge bg-primary fs-6 mb-2" id="current-produced-display">0 adet</div>
                                                        <div class="text-muted small">Toplam Üretilen</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Hızlı Adet Butonları (Barkod okutulduktan sonra görünür) -->
                                    <div class="mb-3" id="quick-buttons-section" style="display: none;">
                                        <label class="form-label fw-bold">Hızlı Adet Ekleme:</label>
                                        <div class="btn-group" role="group">
                                            <button type="button" class="btn btn-outline-primary" onclick="quickAddQuantity(1)">+1</button>
                                            <button type="button" class="btn btn-outline-primary" onclick="quickAddQuantity(5)">+5</button>
                                            <button type="button" class="btn btn-outline-primary" onclick="quickAddQuantity(10)">+10</button>
                                            <button type="button" class="btn btn-outline-primary" onclick="quickAddQuantity(25)">+25</button>
                                            <button type="button" class="btn btn-outline-primary" onclick="quickAddQuantity(50)">+50</button>
                                        </div>
                                    </div>

                                    <!-- Barkod Okutma Uyarısı -->
                                    <div class="alert alert-warning" id="barcode-warning" style="display: block;">
                                        <i class="fas fa-exclamation-triangle me-2"></i>
                                        <strong>Önce barkod okutun!</strong> Adet girişi yapabilmek için önce ürün barkodunu okutmanız gerekmektedir.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Üretim Geçmişi -->
                    <div class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">
                                        <i class="fas fa-history me-2"></i>Üretim Geçmişi
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div id="production-history" style="max-height: 200px; overflow-y: auto;">
                                        <div class="text-center text-muted">
                                            <i class="fas fa-clock me-2"></i>
                                            Henüz üretim yapılmadı
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Kapat
                    </button>
                    <button type="button" class="btn btn-warning" onclick="saveAndCloseProduction()" id="saveAndCloseBtn">
                        <i class="fas fa-save me-2"></i>Kaydet ve Kapat
                    </button>
                    <button type="button" class="btn btn-success" onclick="completeProduction()" id="completeProductionBtn" disabled>
                        <i class="fas fa-check-circle me-2"></i>Üretimi Tamamla
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="realtime-client.js?v=20241220-2"></script>
    <script src="operator-panel.js?v=20241220-105"></script>
</body>
</html>
